# HW4

## Запуск 
python3 process.py \[*путь до .jsonl файла*] \[*запрос*]

## Файлы
`process.py` - основной файл, в котором происходит вызов функций проекта

`import_data.py` - файл, содержащий функции для создания словаря с данными

`preprocessing.py` - файл, содержащий функции для обработки текста

`create_matrix_bm25.py` - файл, содержащий функции для индексирования (bm_25)

`create_matrix_bert.py` - файл, содержащий функции для индексирования (BERT)

`request_processing.py` - файл, использующийся для векторизации запроса и поиска ближайших из документов

`score.py` - файл, содержащий функции для подсчета метрик

## Функции
`main()` - основная функция, в которой вызываются остальные ниже

`read_file(path)` - функция получает на вход путь до .jsonl документа и возвращает словарь вида **{вопрос: ответ}**

`create_dict(texts)` - функция получает на вход словарь **{вопрос: ответ}**, для каждого текста вызывается функция `lemmatize()`

`lemmatize(text, morph, stoplist)` - функция получает на вход текст, морфологизатор и стоплист, очищает текст, с помощью `pymorphy2` определяются леммы, возвращается строка из лемм

`indexing_bm25(texts)` - функция получает на вход тексты, инициализирует векторазеры и считает BM25. Возвращает матрицу и сам vectorizer

`mean_pooling(model_output, attention_mask)` и `indexing_bert(text)` - функции для подсчета матриц (BERT), `indexing_bert()` принимает на вход необработанный текст

`request_search_bert(vectorizer, text)` - функция получает на вход запрос и vectorizer, считает вектор для запроса, возвращается вектор

`search_similar(matrix, request)` - функция получает на вход матрицу и векторизированный запрос и перемножает их

`create_output(scores, text)` - функция получается на вход скоры и корпус текстов и сортирует их 

`count_score(matrix_questions, matrix_answers)` - функция получает на вход матрицы с вопросами и ответами и считает метрики

